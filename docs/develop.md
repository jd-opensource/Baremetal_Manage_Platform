# Customized development and redeployment

## Development and deployment steps
~~~
Step 1: Code development and testing

Step 2: Application image creation

Step 3: Redeployment

Step 4: Special attention
~~~

## Step 1: Customized code development and testing
......

## Step 2: Application image creation
Each component directory contains a corresponding dockerfile file, for example: bmp-scheduler component
~~~
# Set relevant environment variables. The .env and images.cfg files define the image repository and version number and other information
. bmp-deploy/.env
. bmp-deploy/config/image.cfg
docker build -f ./bmp-scheduler/bmp-scheduler.Dockerfile -t ${bmp_scheduler_image} ./bmp-scheduler
~~~
Note: The image creation of bmp-console-api, bmp-operation-api, and oob-log-alert components is slightly different, refer to "Step 4: Special attention:"

## Step 3: Redeploy
Example: bmp-scheduler
~~~
cd bmp-deploy
chmod +x ./bmp-deploy.sh
./bmp-deploy.sh restart bmp-scheduler
~~~

## Step 4: Special attention:
- bmp-console-api depends on the SDK generated by bmp-openapi-console
- bmp-operation-api and oob-log-alert depend on the SDK generated by bmp-openapi

If bmp-openapi-console and bmp-openapi components are customized, please repackage and deploy bmp-console-api or bmp-operation-api, oob-log-alert components
Example: Re-create the image of bmp-openapi-console
~~~
# Repackage bmp-console-api and create an image
. bmp-deploy/.env
. bmp-deploy/config/image.cfg

# Note that the last parameter of docker build is ./ (i.e. Baremetal_Manage_Platform directory)
docker build -f ./bmp-openapi-console/bmp-openapi-console.Dockerfile -t ${bmp_openapi_console_image} ./
~~~
The redeployment method is the same as "Step 3"